# 闪视数据
一款免费便捷数据可视化微信小程序

## 云开发 quickstart

这是云开发的快速启动指引，其中演示了如何上手使用云开发的三大基础能力：

- 数据库：一个既可在小程序前端操作，也能在云函数中读写的 JSON 文档型数据库
- 文件存储：在小程序前端直接上传/下载云端文件，在云开发控制台可视化管理
- 云函数：在云端运行的代码，微信私有协议天然鉴权，开发者只需编写业务逻辑代码

### 参考文档

- [云开发文档](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)

## 脚本编译

### 前置条件
将整个小程序作为一个 npm 项目的一部分进行包裹，最后只需要关心 dist 的输出，而不需要去关心源码

微信开发者工具则只需要去编译生成的 dist 里面产物

### 原因
- 自己平时在公司直接使用配制`gulp`进行便捷开发，那么在微信小程序应该也是可以实现的。
- 解决
    - 首先查了一下`gulp`的插件发现支持 `HTML`转`wxml`,那么编译视图模板就 OK 了
    - 但是发现并没有支持直接`less/sass`转`wxss`的插件。那么是不是可以曲线救国？
        - 首先可以很清晰发现，`wxss`和`css`内容是一模一样的，只是名字不同，那么我们分两步实现
        - 第一步将`less/sass`编译成 `css`,然后再将`css`文件使用`renameFile`将其在`dist`目录里面将 `css`文件改名成`wxss`即可。

- 模板和样式表都解决了，剩下的 `js`文件和`json`就更简单了，`js`可以自己使用 `ts` 开发，然后直接在`dist`目录里面转译成`js`即可。`json`则无需处理

- 同时需要解决的是新增页面和组件的空白模板问题，这个可以自己存一套空白模板，然后用命令行增加即可，这样子即可以解决增加东西需要去微信开发者增加还要文件内容的问题，而且可以加快自己的速度，让操作更加便捷起来。

## 项目架构

### 底bar
1. 首页
    - 数据录入模块
        - 手动录入
        - 表格导入
        - 拍照导入
        - 关怀模式
2. 分类
    - 包含所有数据模型的示例
3. 论坛
    - 公共发言模块，可以针对小程序的各个地方提出共同讨论
4. 我的
    - 包含个人信息，分享记录，数据记录等信息

## 踩坑记录

### 1. 编译失败问题
云开发的微信小程序 miniprogramRoot 默认是 miniprogram，但是我讲该文件夹和根目录打平，导致编译的时候找不到miniprogram目录编译失败，做对应的修改即可修复